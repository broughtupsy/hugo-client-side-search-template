{{ $bootstrapCss := resources.Get "css/bootstrap.css" }}
{{ $mainCss := resources.Get "css/main.css" }}
{{ $bundledCss := slice $bootstrapCss $mainCss | resources.Concat "css/bundled.css" }}
{{ $bundledJs := resources.Get "js/main.ts" | js.Build "js/bundled.js" }}

{{ if not site.IsServer }}
  {{ $bundledJs = $bundledJs | minify | fingerprint }}
  {{ $bundledCss = $bundledCss | minify | fingerprint }}
{{ end }}

<!doctype html>
<html lang="en">
  <head>
    {{ hugo.Generator }}

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>{{ .Title }} | {{ site.Title }}</title>

    <link rel="stylesheet" href="{{ $bundledCss.RelPermalink }}" integrity="{{ $bundledCss.Data.Integrity }}"></link>
  </head>

  <body>
    <div class="container">
      {{ block "main" . }}{{ end }}
    </div>

    <script type="text/javascript" src="{{ $bundledJs.RelPermalink }}" integrity="{{ $bundledJs.Data.Integrity }}"></script>
  </body>
</html>
